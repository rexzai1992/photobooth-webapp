import"./modulepreload-polyfill-B5Qt9EMX.js";import{S as P,a as D}from"./config-6-4UJsQe.js";const f=1176,E=1470,o=document.getElementById("finalCanvas"),m=o.getContext("2d"),O=document.getElementById("addFish"),U=document.getElementById("addOctopus"),Y=document.getElementById("addSeaweed"),X=document.getElementById("addAx"),R=document.getElementById("addBubble"),c=document.getElementById("downloadBtn"),T=document.getElementById("homeBtn"),N=document.getElementById("reset");let s=[],h={x:0,y:0},a=null;const w=new Image,B=localStorage.getItem("photoStrip");B?(w.src=B,w.onload=r,localStorage.removeItem("photoStrip")):alert("No photo found!");function r(){m.clearRect(0,0,f,E),m.drawImage(w,0,0,f,E),s.forEach(e=>m.drawImage(e.img,e.x,e.y,e.width,e.height))}function l(e){const t=new Image;t.src=e,t.onload=()=>{s.push({img:t,x:f/2-t.width/6,y:E/2-t.height/6,width:t.width/2.5,height:t.height/2.5,dragging:!1}),r()}}function k(e){var y,v,b,x;const t=o.getBoundingClientRect(),d=o.width/t.width,i=o.height/t.height,n=((v=(y=e.touches)==null?void 0:y[0])==null?void 0:v.clientX)??e.clientX,C=((x=(b=e.touches)==null?void 0:b[0])==null?void 0:x.clientY)??e.clientY;return{x:(n-t.left)*d,y:(C-t.top)*i}}function S(e){const{x:t,y:d}=k(e);for(let i=s.length-1;i>=0;i--){const n=s[i];if(t>=n.x&&t<=n.x+n.width&&d>=n.y&&d<=n.y+n.height){a=n,n.dragging=!0,h.x=t-n.x,h.y=d-n.y,s.splice(i,1),s.push(n),r(),e.preventDefault();break}}}function A(e){if(!(a!=null&&a.dragging))return;const{x:t,y:d}=k(e);a.x=t-h.x,a.y=d-h.y,r(),e.preventDefault()}function g(){a&&(a.dragging=!1),a=null}o.addEventListener("mousedown",S);o.addEventListener("mousemove",A);o.addEventListener("mouseup",g);o.addEventListener("mouseleave",g);o.addEventListener("touchstart",S);o.addEventListener("touchmove",A);o.addEventListener("touchend",g);o.addEventListener("touchcancel",g);O.addEventListener("click",()=>l("Assets/fish-photobooth/camerapage/stickers/fish.png"));U.addEventListener("click",()=>l("Assets/fish-photobooth/camerapage/stickers/octopus.png"));const I=["Assets/fish-photobooth/camerapage/stickers/seaweed1.png","Assets/fish-photobooth/camerapage/stickers/seaweed2.png"],L=["Assets/fish-photobooth/camerapage/stickers/bubble1.png","Assets/fish-photobooth/camerapage/stickers/bubble2.png"];let u=0,p=0;Y.addEventListener("click",()=>{l(I[u]),u=(u+1)%I.length});X.addEventListener("click",()=>l("Assets/fish-photobooth/camerapage/stickers/axolotl.png"));R.addEventListener("click",()=>{l(L[p]),p=(p+1)%L.length});N.addEventListener("click",()=>{s=[],r()});c.addEventListener("click",async()=>{c.disabled=!0,c.textContent="Sending...";try{const e=o.toDataURL("image/png");if((await fetch(`${P}/rest/v1/photos`,{method:"POST",headers:{"Content-Type":"application/json",apikey:D,Prefer:"return=minimal"},body:JSON.stringify({image_data:e})})).ok)alert("Photo sent successfully! ðŸŽ‰"),c.textContent="Sent!",setTimeout(()=>window.location.href="index.html",1500);else throw new Error("Upload failed")}catch{alert("Failed to send photo. Please try again."),c.disabled=!1,c.textContent="Send"}});T.addEventListener("click",()=>window.location.href="index.html");document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".logo");e&&e.addEventListener("click",()=>window.location.href="index.html")});
