import"./modulepreload-polyfill-B5Qt9EMX.js";import"./bubbles-BtpwCJlt.js";const r=1176,p=1470,g=p/2,a={video:document.getElementById("liveVideo"),canvas:document.getElementById("finalCanvas"),ctx:document.getElementById("finalCanvas").getContext("2d"),takePhotoBtn:document.getElementById("takePhoto"),downloadBtn:document.getElementById("downloadBtn"),countdownEl:document.querySelector(".countdown-timer")};let s=0;const m=t=>{const{video:e}=a;e.style.display="block",e.style.top=t===0?"0":"50%",e.style.left="0",e.style.width="100%",e.style.height="50%"},y=t=>{let e=3;const{countdownEl:n}=a;n.textContent=e,n.style.display="flex";const o=setInterval(()=>{e--,e>0?n.textContent=e:(clearInterval(o),n.style.display="none",t())},1e3)},w=()=>{const{video:t,ctx:e,takePhotoBtn:n}=a,o=s===0?0:g,d=t.videoWidth,i=t.videoHeight,h=r/g,u=d/i;let v,f,l,c;u>h?(c=i,l=i*h,v=(d-l)/2,f=0):(l=d,c=d/h,v=0,f=(i-c)/2),e.save(),e.translate(r,0),e.scale(-1,1),e.drawImage(t,v,f,l,c,0,o,r,g),e.restore(),s++,s===1?(m(1),n.disabled=!1):s===2&&E()},E=()=>{const{video:t,ctx:e,canvas:n}=a;t.style.display="none";const o=new Image;o.src="Assets/fish-photobooth/camerapage/frame.png",o.onload=()=>{e.drawImage(o,0,0,r,p),localStorage.setItem("photoStrip",n.toDataURL("image/png")),setTimeout(()=>window.location.href="final.html",50)},o.complete&&o.onload()},I=()=>{a.canvas.toBlob(t=>{const e=document.createElement("a");e.href=URL.createObjectURL(t),e.download="photo-strip.png",e.click()},"image/png")},B=()=>{navigator.mediaDevices.getUserMedia({video:{width:{ideal:2560},height:{ideal:1440},facingMode:"user"},audio:!1}).then(t=>{a.video.srcObject=t,a.video.play(),m(0)}).catch(t=>alert("Camera access failed: "+t))},L=()=>{const{takePhotoBtn:t,downloadBtn:e}=a;t.addEventListener("click",()=>{s>1||(t.disabled=!0,y(w))}),e.addEventListener("click",I),window.addEventListener("resize",()=>{s===0?m(0):s===1&&m(1)})},k=()=>{B(),L()};k();document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector(".logo");t&&t.addEventListener("click",()=>window.location.href="index.html")});
